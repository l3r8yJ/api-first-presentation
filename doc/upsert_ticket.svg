<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="623px" preserveAspectRatio="none" style="width:1319px;height:623px;background:#000000;" version="1.1" viewBox="0 0 1319 623" width="1319px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mayovljcfaqb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#FFFFFF" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="122" x="596.5" y="28.708">"Upsert Ticket"</text><rect fill="#222222" height="576.125" style="stroke:#C7C7C7;stroke-width:1.0;" width="459" x="26" y="40.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="175.5" y="53.02">Frontend $frontendColor</text><rect fill="#222222" height="576.125" style="stroke:#C7C7C7;stroke-width:1.0;" width="451.5" x="837.5" y="40.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="986.25" y="53.02">Backend $backendColor</text><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="360.3984" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="431.5" y="153.3828"/><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="116.5313" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="868.5" y="353.1172"/><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="353.3984" style="stroke:#FFFFFF;stroke-width:2.0;" width="1295" x="10" y="160.3828"/><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="235.8672" style="stroke:#FFFFFF;stroke-width:2.0;" width="1275" x="20" y="270.9141"/><rect fill="#000000" height="189.6016" style="stroke:none;stroke-width:1.0;" width="1275" x="20" y="317.1797"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="143.3828" y2="530.7813"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="436" x2="436" y1="143.3828" y2="530.7813"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="873.5" x2="873.5" y1="143.3828" y2="530.7813"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1252" x2="1252" y1="143.3828" y2="530.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="30" y="140.0811">Оператор</text><ellipse cx="64.5" cy="70.0859" fill="#070707" filter="url(#f1mayovljcfaqb)" rx="8" ry="8" style="stroke:#C7C7C7;stroke-width:2.0;"/><path d="M64.5,78.0859 L64.5,105.0859 M51.5,86.0859 L77.5,86.0859 M64.5,105.0859 L51.5,120.0859 M64.5,105.0859 L77.5,120.0859 " fill="none" filter="url(#f1mayovljcfaqb)" style="stroke:#C7C7C7;stroke-width:2.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="30" y="542.7764">Оператор</text><ellipse cx="64.5" cy="556.0781" fill="#070707" filter="url(#f1mayovljcfaqb)" rx="8" ry="8" style="stroke:#C7C7C7;stroke-width:2.0;"/><path d="M64.5,564.0781 L64.5,591.0781 M51.5,572.0781 L77.5,572.0781 M64.5,591.0781 L51.5,606.0781 M64.5,591.0781 L77.5,606.0781 " fill="none" filter="url(#f1mayovljcfaqb)" style="stroke:#C7C7C7;stroke-width:2.0;"/><rect fill="#070707" filter="url(#f1mayovljcfaqb)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="85" x="392" y="108.0859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="399" y="128.0811">Web-Client</text><rect fill="#070707" filter="url(#f1mayovljcfaqb)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="85" x="392" y="529.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="399" y="549.7764">Web-Client</text><rect fill="#070707" filter="url(#f1mayovljcfaqb)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="60" x="841.5" y="108.0859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="848.5" y="128.0811">Service</text><rect fill="#070707" filter="url(#f1mayovljcfaqb)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="60" x="841.5" y="529.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="848.5" y="549.7764">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1220" y="140.0811">Database</text><path d="M1234.5,91.0859 C1234.5,81.0859 1252.5,81.0859 1252.5,81.0859 C1252.5,81.0859 1270.5,81.0859 1270.5,91.0859 L1270.5,117.0859 C1270.5,127.0859 1252.5,127.0859 1252.5,127.0859 C1252.5,127.0859 1234.5,127.0859 1234.5,117.0859 L1234.5,91.0859 " fill="#070707" filter="url(#f1mayovljcfaqb)" style="stroke:#FFFFFF;stroke-width:1.5;"/><path d="M1234.5,91.0859 C1234.5,101.0859 1252.5,101.0859 1252.5,101.0859 C1252.5,101.0859 1270.5,101.0859 1270.5,91.0859 " fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1220" y="542.7764">Database</text><path d="M1234.5,556.0781 C1234.5,546.0781 1252.5,546.0781 1252.5,546.0781 C1252.5,546.0781 1270.5,546.0781 1270.5,556.0781 L1270.5,582.0781 C1270.5,592.0781 1252.5,592.0781 1252.5,592.0781 C1252.5,592.0781 1234.5,592.0781 1234.5,582.0781 L1234.5,556.0781 " fill="#070707" filter="url(#f1mayovljcfaqb)" style="stroke:#FFFFFF;stroke-width:1.5;"/><path d="M1234.5,556.0781 C1234.5,566.0781 1252.5,566.0781 1252.5,566.0781 C1252.5,566.0781 1270.5,566.0781 1270.5,556.0781 " fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="360.3984" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="431.5" y="153.3828"/><rect fill="#000000" filter="url(#f1mayovljcfaqb)" height="116.5313" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="868.5" y="353.1172"/><path d="M10,160.3828 L244,160.3828 L244,167.3828 L234,177.3828 L10,177.3828 L10,160.3828 " fill="#111111" style="stroke:#FFFFFF;stroke-width:1.0;"/><rect fill="none" height="353.3984" style="stroke:#FFFFFF;stroke-width:2.0;" width="1295" x="10" y="160.3828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="25" y="173.4497">Редактирование обращения</text><polygon fill="#C7C7C7" points="419.5,209.7813,429.5,213.7813,419.5,217.7813,423.5,213.7813" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="64.5" x2="425.5" y1="213.7813" y2="213.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="71.5" y="193.5825">Заполняет поля экранной формы и нажимает на кнопку</text><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="71.5" y="208.7153">"Сохранить изменения"</text><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="441.5" x2="483.5" y1="242.9141" y2="242.9141"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="483.5" x2="483.5" y1="242.9141" y2="255.9141"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="442.5" x2="483.5" y1="255.9141" y2="255.9141"/><polygon fill="#C7C7C7" points="452.5,251.9141,442.5,255.9141,452.5,259.9141,448.5,255.9141" style="stroke:#C7C7C7;stroke-width:1.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="448.5" y="237.8481">Валидация обязательных полей формы</text><path d="M20,270.9141 L83,270.9141 L83,277.9141 L73,287.9141 L20,287.9141 L20,270.9141 " fill="#111111" style="stroke:#FFFFFF;stroke-width:1.0;"/><rect fill="none" height="235.8672" style="stroke:#FFFFFF;stroke-width:2.0;" width="1275" x="20" y="270.9141"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="35" y="283.981">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="357" x="98" y="283.1245">[$failureBackgroundColor Failure: Форма не прошла валидацию]</text><polygon fill="#C7C7C7" points="75.5,305.1797,65.5,309.1797,75.5,313.1797,71.5,309.1797" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="430.5" y1="309.1797" y2="309.1797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="81.5" y="304.1138">Подсветить незаполненные поля</text><line style="stroke:#FFFFFF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1295" y1="318.1797" y2="318.1797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="351" x="25" y="328.3901">[$successBackgroundColor Success: Форма прошла валидацию]</text><polygon fill="#C7C7C7" points="856.5,349.1172,866.5,353.1172,856.5,357.1172,860.5,353.1172" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="441.5" x2="862.5" y1="353.1172" y2="353.1172"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="448.5" y="348.0513">Вызвать метод</text><a href="$mutationCssdTicketsUpsert" target="_top" title="$mutationCssdTicketsUpsert" xlink:actuate="onRequest" xlink:href="$mutationCssdTicketsUpsert" xlink:show="new" xlink:title="$mutationCssdTicketsUpsert" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="136" x="540.5" y="348.0513">Обновить обращение</text></a><polygon fill="#C7C7C7" points="1240.5,378.25,1250.5,382.25,1240.5,386.25,1244.5,382.25" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="878.5" x2="1246.5" y1="382.25" y2="382.25"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="885.5" y="377.1841">Создать/Изменить обращение в таблице</text><a href="$ticketsTable" target="_top" title="$ticketsTable" xlink:actuate="onRequest" xlink:href="$ticketsTable" xlink:show="new" xlink:title="$ticketsTable" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="1138.5" y="377.1841">tickets</text></a><polygon fill="#C7C7C7" points="1240.5,407.3828,1250.5,411.3828,1240.5,415.3828,1244.5,411.3828" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="878.5" x2="1246.5" y1="411.3828" y2="411.3828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="885.5" y="406.3169">Создать/Изменить причины обращения в таблице</text><a href="$issuesTable" target="_top" title="$issuesTable" xlink:actuate="onRequest" xlink:href="$issuesTable" xlink:show="new" xlink:title="$issuesTable" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="1199.5" y="406.3169">issues</text></a><polygon fill="#C7C7C7" points="1240.5,436.5156,1250.5,440.5156,1240.5,444.5156,1244.5,440.5156" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="878.5" x2="1246.5" y1="440.5156" y2="440.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="885.5" y="435.4497">Создать запись в таблице</text><a href="$eventsOutbox" target="_top" title="$eventsOutbox" xlink:actuate="onRequest" xlink:href="$eventsOutbox" xlink:show="new" xlink:title="$eventsOutbox" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="86" x="1044.5" y="435.4497">events_outbox</text></a><polygon fill="#C7C7C7" points="452.5,465.6484,442.5,469.6484,452.5,473.6484,448.5,469.6484" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="872.5" y1="469.6484" y2="469.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="403" x="458.5" y="464.5825">Вернуть ответ с атрибутами созданного/измененного обращения</text><polygon fill="#C7C7C7" points="75.5,494.7813,65.5,498.7813,75.5,502.7813,71.5,498.7813" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="430.5" y1="498.7813" y2="498.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="81.5" y="493.7153">Закрыть карточку обращения</text><!--MD5=[9764066d133784374c53c514f82d0d5c]
@startuml upsert_ticket

title "Upsert Ticket"
skinparam monochrome reverse

box Frontend $frontendColor
    actor "Оператор" as user order 10
    participant "Web-Client" as client order 20
end box

box Backend $backendColor
    participant "Service" as service order 30
    database "Database" as db order 40
end box

group Редактирование обращения
    activate client
        user -> client: Заполняет поля экранной формы и нажимает на кнопку\n"Сохранить изменения"
        client -> client: Валидация обязательных полей формы
        alt $failureBackgroundColor Failure: Форма не прошла валидацию
            client - -> user: Подсветить незаполненные поля
        else $successBackgroundColor Success: Форма прошла валидацию
            client -> service: Вызвать метод [[$mutationCssdTicketsUpsert Обновить обращение]]
            activate service
                service -> db: Создать/Изменить обращение в таблице [[$ticketsTable tickets]]
                service -> db: Создать/Изменить причины обращения в таблице [[$issuesTable issues]]
                service -> db: Создать запись в таблице [[$eventsOutbox events_outbox]]
                service - -> client: Вернуть ответ с атрибутами созданного/измененного обращения
            deactivate service
            client - -> user: Закрыть карточку обращения
        end
    deactivate client
end
@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>