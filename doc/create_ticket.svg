<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="607px" preserveAspectRatio="none" style="width:1068px;height:607px;background:#000000;" version="1.1" viewBox="0 0 1068 607" width="1068px" zoomAndPan="magnify"><defs><filter height="300%" id="f10r8zmwmuav0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#FFFFFF" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="120" x="472" y="28.708">"Create Ticket"</text><rect fill="#222222" height="560.9922" style="stroke:#C7C7C7;stroke-width:1.0;" width="400" x="26" y="40.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="146" y="53.02">Frontend $frontendColor</text><rect fill="#222222" height="560.9922" style="stroke:#C7C7C7;stroke-width:1.0;" width="346.5" x="691.5" y="40.9531"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="787.75" y="53.02">Backend $backendColor</text><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="345.2656" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="372.5" y="153.3828"/><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="87.3984" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="722.5" y="367.1172"/><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="338.2656" style="stroke:#FFFFFF;stroke-width:2.0;" width="1044" x="10" y="160.3828"/><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="206.7344" style="stroke:#FFFFFF;stroke-width:2.0;" width="1024" x="20" y="284.9141"/><rect fill="#000000" height="160.4688" style="stroke:none;stroke-width:1.0;" width="1024" x="20" y="331.1797"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="143.3828" y2="515.6484"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="377" x2="377" y1="143.3828" y2="515.6484"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="727.5" x2="727.5" y1="143.3828" y2="515.6484"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1001" x2="1001" y1="143.3828" y2="515.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="30" y="140.0811">Оператор</text><ellipse cx="64.5" cy="70.0859" fill="#070707" filter="url(#f10r8zmwmuav0)" rx="8" ry="8" style="stroke:#C7C7C7;stroke-width:2.0;"/><path d="M64.5,78.0859 L64.5,105.0859 M51.5,86.0859 L77.5,86.0859 M64.5,105.0859 L51.5,120.0859 M64.5,105.0859 L77.5,120.0859 " fill="none" filter="url(#f10r8zmwmuav0)" style="stroke:#C7C7C7;stroke-width:2.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="30" y="527.6436">Оператор</text><ellipse cx="64.5" cy="540.9453" fill="#070707" filter="url(#f10r8zmwmuav0)" rx="8" ry="8" style="stroke:#C7C7C7;stroke-width:2.0;"/><path d="M64.5,548.9453 L64.5,575.9453 M51.5,556.9453 L77.5,556.9453 M64.5,575.9453 L51.5,590.9453 M64.5,575.9453 L77.5,590.9453 " fill="none" filter="url(#f10r8zmwmuav0)" style="stroke:#C7C7C7;stroke-width:2.0;"/><rect fill="#070707" filter="url(#f10r8zmwmuav0)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="85" x="333" y="108.0859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="340" y="128.0811">Web-Client</text><rect fill="#070707" filter="url(#f10r8zmwmuav0)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="85" x="333" y="514.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="340" y="534.6436">Web-Client</text><rect fill="#070707" filter="url(#f10r8zmwmuav0)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="60" x="695.5" y="108.0859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="702.5" y="128.0811">Service</text><rect fill="#070707" filter="url(#f10r8zmwmuav0)" height="30.2969" style="stroke:#C7C7C7;stroke-width:1.5;" width="60" x="695.5" y="514.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="702.5" y="534.6436">Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="969" y="140.0811">Database</text><path d="M983.5,91.0859 C983.5,81.0859 1001.5,81.0859 1001.5,81.0859 C1001.5,81.0859 1019.5,81.0859 1019.5,91.0859 L1019.5,117.0859 C1019.5,127.0859 1001.5,127.0859 1001.5,127.0859 C1001.5,127.0859 983.5,127.0859 983.5,117.0859 L983.5,91.0859 " fill="#070707" filter="url(#f10r8zmwmuav0)" style="stroke:#FFFFFF;stroke-width:1.5;"/><path d="M983.5,91.0859 C983.5,101.0859 1001.5,101.0859 1001.5,101.0859 C1001.5,101.0859 1019.5,101.0859 1019.5,91.0859 " fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="969" y="527.6436">Database</text><path d="M983.5,540.9453 C983.5,530.9453 1001.5,530.9453 1001.5,530.9453 C1001.5,530.9453 1019.5,530.9453 1019.5,540.9453 L1019.5,566.9453 C1019.5,576.9453 1001.5,576.9453 1001.5,576.9453 C1001.5,576.9453 983.5,576.9453 983.5,566.9453 L983.5,540.9453 " fill="#070707" filter="url(#f10r8zmwmuav0)" style="stroke:#FFFFFF;stroke-width:1.5;"/><path d="M983.5,540.9453 C983.5,550.9453 1001.5,550.9453 1001.5,550.9453 C1001.5,550.9453 1019.5,550.9453 1019.5,540.9453 " fill="none" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="345.2656" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="372.5" y="153.3828"/><rect fill="#000000" filter="url(#f10r8zmwmuav0)" height="87.3984" style="stroke:#C7C7C7;stroke-width:1.0;" width="10" x="722.5" y="367.1172"/><path d="M10,160.3828 L197,160.3828 L197,167.3828 L187,177.3828 L10,177.3828 L10,160.3828 " fill="#111111" style="stroke:#FFFFFF;stroke-width:1.0;"/><rect fill="none" height="338.2656" style="stroke:#FFFFFF;stroke-width:2.0;" width="1044" x="10" y="160.3828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="25" y="173.4497">Создание обращения</text><polygon fill="#C7C7C7" points="360.5,194.6484,370.5,198.6484,360.5,202.6484,364.5,198.6484" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="64.5" x2="366.5" y1="198.6484" y2="198.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="71.5" y="193.5825">Вызов принят</text><polygon fill="#C7C7C7" points="360.5,223.7813,370.5,227.7813,360.5,231.7813,364.5,227.7813" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="64.5" x2="366.5" y1="227.7813" y2="227.7813"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="71.5" y="222.7153">Нажата кнопка "Создать обращение"</text><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="382.5" x2="424.5" y1="256.9141" y2="256.9141"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="424.5" x2="424.5" y1="256.9141" y2="269.9141"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="383.5" x2="424.5" y1="269.9141" y2="269.9141"/><polygon fill="#C7C7C7" points="393.5,265.9141,383.5,269.9141,393.5,273.9141,389.5,269.9141" style="stroke:#C7C7C7;stroke-width:1.0;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="389.5" y="251.8481">Проверка наличия активного звонка</text><path d="M20,284.9141 L83,284.9141 L83,291.9141 L73,301.9141 L20,301.9141 L20,284.9141 " fill="#111111" style="stroke:#FFFFFF;stroke-width:1.0;"/><rect fill="none" height="206.7344" style="stroke:#FFFFFF;stroke-width:2.0;" width="1024" x="20" y="284.9141"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="35" y="297.981">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="309" x="98" y="297.1245">[$failureBackgroundColor Failure: Нет активного звонка]</text><polygon fill="#C7C7C7" points="75.5,319.1797,65.5,323.1797,75.5,327.1797,71.5,323.1797" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="371.5" y1="323.1797" y2="323.1797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="81.5" y="318.1138">Вернуть ошибку отсутствия звонка</text><line style="stroke:#FFFFFF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1044" y1="332.1797" y2="332.1797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="322" x="25" y="342.3901">[$successBackgroundColor Success: Активный звонок есть]</text><polygon fill="#C7C7C7" points="710.5,363.1172,720.5,367.1172,710.5,371.1172,714.5,367.1172" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="382.5" x2="716.5" y1="367.1172" y2="367.1172"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="389.5" y="362.0513">Вызвать метод</text><a href="$mutationCssdTicketsCreate" target="_top" title="$mutationCssdTicketsCreate" xlink:actuate="onRequest" xlink:href="$mutationCssdTicketsCreate" xlink:show="new" xlink:title="$mutationCssdTicketsCreate" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="123" x="481.5" y="362.0513">Создать обращение</text></a><polygon fill="#C7C7C7" points="989.5,392.25,999.5,396.25,989.5,400.25,993.5,396.25" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="732.5" x2="995.5" y1="396.25" y2="396.25"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="739.5" y="391.1841">Создать обращение в таблице</text><a href="$ticketsTable" target="_top" title="$ticketsTable" xlink:actuate="onRequest" xlink:href="$ticketsTable" xlink:show="new" xlink:title="$ticketsTable" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="928.5" y="391.1841">tickets</text></a><polygon fill="#C7C7C7" points="989.5,421.3828,999.5,425.3828,989.5,429.3828,993.5,425.3828" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;" x1="732.5" x2="995.5" y1="425.3828" y2="425.3828"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="739.5" y="420.3169">Создать запись в таблице</text><a href="$eventsOutbox" target="_top" title="$eventsOutbox" xlink:actuate="onRequest" xlink:href="$eventsOutbox" xlink:show="new" xlink:title="$eventsOutbox" xlink:type="simple"><text fill="#E3E3E3" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="86" x="898.5" y="420.3169">events_outbox</text></a><polygon fill="#C7C7C7" points="393.5,450.5156,383.5,454.5156,393.5,458.5156,389.5,454.5156" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="387.5" x2="726.5" y1="454.5156" y2="454.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="316" x="399.5" y="449.4497">Вернуть ответ с атрибутами созданного обращения</text><polygon fill="#C7C7C7" points="75.5,479.6484,65.5,483.6484,75.5,487.6484,71.5,483.6484" style="stroke:#C7C7C7;stroke-width:1.0;"/><line style="stroke:#C7C7C7;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="371.5" y1="483.6484" y2="483.6484"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="81.5" y="478.5825">Открыть карточку обращения для заполнения</text><!--MD5=[f978cf27183f80ba218c1cb51274cc46]
@startuml create_ticket

skinparam monochrome reverse
title "Create Ticket"

box Frontend $frontendColor
    actor "Оператор" as user order 10
    participant "Web-Client" as client order 20
end box

box Backend $backendColor
    participant "Service" as service order 30
    database "Database" as db order 40
end box

group Создание обращения
    activate client
        user -> client: Вызов принят
        user -> client: Нажата кнопка "Создать обращение"

        client -> client: Проверка наличия активного звонка

        alt $failureBackgroundColor Failure: Нет активного звонка
            client - -> user: Вернуть ошибку отсутствия звонка
        else $successBackgroundColor Success: Активный звонок есть
            client -> service: Вызвать метод [[$mutationCssdTicketsCreate Создать обращение]]
            activate service
                service -> db: Создать обращение в таблице [[$ticketsTable tickets]]
                service -> db: Создать запись в таблице [[$eventsOutbox events_outbox]]
                service - -> client: Вернуть ответ с атрибутами созданного обращения
            deactivate service
            client - -> user: Открыть карточку обращения для заполнения
        end
    deactivate client
end
@enduml

PlantUML version 1.2020.23(Sun Dec 13 19:14:58 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>